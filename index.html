<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lufthansa Group VA | –ü–æ—Ä—Ç–∞–ª –ü–∏–ª–æ—Ç–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- –°–¢–ò–õ–¨: –ñ–ò–î–ö–û–ï –°–¢–ï–ö–õ–û (Liquid Glass) --- */
        :root {
            --bg-deep: #020617;
            --lh-yellow: #FFB100;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-gray: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background-color: var(--bg-deep);
            color: var(--text-main); 
            font-family: 'Montserrat', sans-serif; 
            overflow-x: hidden; /* –ß—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø–æ–ª–æ—Å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –æ—Ç –∞–Ω–∏–º–∞—Ü–∏–π */
            min-height: 100vh;
        }

        /* --- –§–û–ù–û–í–ê–Ø –ê–ù–ò–ú–ê–¶–ò–Ø --- */
        .liquid-wrapper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;
        }
        .orb {
            position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.5;
            animation: float 20s infinite ease-in-out;
        }
        .orb-1 { width: 400px; height: 400px; background: #0b247a; top: -100px; left: -100px; }
        .orb-2 { width: 300px; height: 300px; background: var(--lh-yellow); bottom: -50px; right: -50px; opacity: 0.2; animation-delay: -5s; }
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -30px); }
        }

        /* --- UI –ö–û–ú–ü–û–ù–ï–ù–¢–´ --- */
        .hidden { display: none !important; }
        
        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ –æ–∫–æ–Ω */
        #intro-screen, #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        #intro-screen { background: black; }
        #login-screen { background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); }

        .center-card {
            width: 90%; max-width: 400px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã */
            text-align: center;
        }

        /* –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px; padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: 0.3s;
        }
        .card:hover { transform: translateY(-5px); background: rgba(255, 255, 255, 0.08); }

        /* –ö–Ω–æ–ø–∫–∏ –∏ –∏–Ω–ø—É—Ç—ã */
        input, select {
            width: 100%; padding: 15px; margin-bottom: 15px;
            background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); border-radius: 10px;
            color: white; font-family: inherit; outline: none;
        }
        .btn {
            background: rgba(255,255,255,0.1); border: 1px solid var(--glass-border); color: white;
            padding: 15px; border-radius: 10px; cursor: pointer; font-weight: 800; text-transform: uppercase;
            width: 100%; transition: 0.3s;
        }
        .btn-yellow {
            background: var(--lh-yellow); color: black; border: none;
            box-shadow: 0 5px 15px rgba(255, 177, 0, 0.3);
        }
        .btn-yellow:hover { background: #ffcc33; transform: scale(1.02); }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        header {
            padding: 20px; background: rgba(2, 6, 23, 0.8); backdrop-filter: blur(15px);
            position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--glass-border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { font-weight: 900; font-size: 1.2rem; }
        .nav-menu { display: flex; gap: 20px; }
        .nav-item { 
            cursor: pointer; opacity: 0.7; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; 
            transition: 0.3s; padding: 5px 0;
        }
        .nav-item:hover, .nav-item.active { opacity: 1; color: var(--lh-yellow); border-bottom: 2px solid var(--lh-yellow); }

        /* –°–µ—Ç–∫–∏ */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }

        /* –°—Ç–∞—Ç—É—Å –±–∞—Ä */
        .status-bar {
            background: linear-gradient(90deg, rgba(255,177,0,0.1), transparent);
            border-left: 5px solid var(--lh-yellow); padding: 15px; margin-bottom: 30px;
            display: flex; justify-content: space-between; align-items: center;
            border-radius: 10px;
        }

        /* --- –ú–û–ë–ò–õ–¨–ù–ê–Ø –ê–î–ê–ü–¢–ê–¶–ò–Ø (–¢–ï–õ–ï–§–û–ù–´) --- */
        @media (max-width: 768px) {
            header { flex-direction: column; gap: 15px; align-items: flex-start; }
            .nav-menu { flex-direction: column; gap: 10px; width: 100%; }
            .nav-item { width: 100%; border-bottom: 1px solid rgba(255,255,255,0.05); }
            .nav-item.active { border-bottom: 2px solid var(--lh-yellow); }
            .status-bar { flex-direction: column; gap: 15px; text-align: left; align-items: flex-start; }
            .grid { grid-template-columns: 1fr; } /* –û–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
            #intro-screen h1 { font-size: 2.5rem; text-align: center; }
        }
        
        /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ */
        .fade-up { animation: fadeUp 0.6s ease forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div class="liquid-wrapper">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div id="intro-screen">
        <h1 style="font-size: 4rem; color: var(--lh-yellow);">LH GROUP</h1>
        <p style="letter-spacing: 3px; margin-top: 10px;">–ü–û–†–¢–ê–õ –ü–ò–õ–û–¢–ê</p>
    </div>

    <div id="login-screen" class="hidden">
        <div class="card center-card fade-up">
            <h2 style="margin-bottom: 20px; color: var(--lh-yellow);">–í–•–û–î –í –ö–û–ö–ü–ò–¢</h2>
            <input type="text" id="callsign" placeholder="–¢–≤–æ–π –ü–æ–∑—ã–≤–Ω–æ–π (–Ω–∞–ø—Ä. DLH001)">
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
            <button class="btn btn-yellow" onclick="login()">–ü–û–õ–ï–¢–ï–õ–ò!</button>
            <p id="login-error" style="color: #ff6b6b; margin-top: 10px;" class="hidden">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!</p>
        </div>
    </div>

    <div id="dashboard" class="hidden">
        <header>
            <div class="logo">Lufthansa <span style="color:var(--lh-yellow)">VA</span></div>
            <div id="pilot-name" style="background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;">–ü–∏–ª–æ—Ç</div>
            <nav class="nav-menu">
                <div class="nav-item active" onclick="nav('about', this)">–û –ù–∞—Å</div>
                <div class="nav-item" onclick="nav('fleet', this)">–°–∞–º–æ–ª–µ—Ç—ã</div>
                <div class="nav-item" onclick="nav('destinations', this)">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                <div class="nav-item" onclick="nav('generator', this)">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</div>
                <div class="nav-item" onclick="nav('my-flight', this)">–ú–æ–π –†–µ–π—Å</div>
            </nav>
        </header>

        <div class="container">
            
            <div id="active-bar" class="status-bar hidden fade-up">
                <div>
                    <div style="font-size: 0.8rem; color: var(--lh-yellow);">–¢–í–û–ô –ê–ö–¢–ò–í–ù–´–ô –†–ï–ô–°</div>
                    <div style="font-size: 1.2rem; font-weight: 800;"><span id="bar-call">---</span> | <span id="bar-route">---</span></div>
                </div>
                <button class="btn" style="width: auto; padding: 10px 20px;" onclick="nav('my-flight', document.querySelectorAll('.nav-item')[4])">–û—Ç–∫—Ä—ã—Ç—å</button>
            </div>

            <section id="sec-about" class="fade-up">
                <h2 style="margin-bottom: 20px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <div class="grid">
                    <div class="card">
                        <h3 style="color:var(--lh-yellow)">5 –ê–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏–π</h3>
                        <p style="color:var(--text-gray); margin-top:10px">Lufthansa, Swiss, Austrian, Eurowings ‚Äî –≤—ã–±–∏—Ä–∞–π –ª—é–±—É—é –∏ –ª–µ—Ç–∞–π –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.</p>
                    </div>
                    <div class="card">
                        <h3 style="color:var(--lh-yellow)">–ü—Ä–æ—Å—Ç—ã–µ –ü—Ä–∞–≤–∏–ª–∞</h3>
                        <ul style="color:var(--text-gray); margin-top:10px; list-style: inside;">
                            <li>–õ–µ—Ç–∞–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
                            <li>–°–æ–±–ª—é–¥–∞–π —É–≤–∞–∂–µ–Ω–∏–µ</li>
                            <li>–ó–∞–ø–æ–ª–Ω—è–π –ø–ª–∞–Ω –ø–æ–ª–µ—Ç–∞</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="sec-fleet" class="hidden">
                <h2 style="margin-bottom: 20px;">–ù–∞—à–∏ –°–∞–º–æ–ª–µ—Ç—ã</h2>
                <div id="fleet-list" class="grid"></div>
            </section>

            <section id="sec-destinations" class="hidden">
                <h2 style="margin-bottom: 20px;">–°–µ—Ç–∫–∞ –ü–æ–ª–µ—Ç–æ–≤</h2>
                <div class="card" style="margin-bottom: 20px;">
                    <p style="margin-bottom: 10px;">1. –í—ã–±–µ—Ä–∏ –∫–æ–º–ø–∞–Ω–∏—é:</p>
                    <select id="dest-airline" onchange="updateDestHubs()">
                        <option value="">-- –í—ã–±–µ—Ä–∏ --</option>
                    </select>
                    <p style="margin-bottom: 10px;">2. –í—ã–±–µ—Ä–∏ –≥–æ—Ä–æ–¥ –≤—ã–ª–µ—Ç–∞ (–•–∞–±):</p>
                    <select id="dest-hub" disabled onchange="showRoutes()">
                        <option value="">-- –°–Ω–∞—á–∞–ª–∞ –∫–æ–º–ø–∞–Ω–∏—é --</option>
                    </select>
                </div>
                <div id="routes-list" class="grid"></div>
            </section>

            <section id="sec-generator" class="hidden">
                <h2 style="margin-bottom: 20px;">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –†–µ–π—Å–∞</h2>
                
                <div id="gen-locked" class="card hidden" style="border: 1px solid #ff6b6b; text-align: center;">
                    <h3 style="color:#ff6b6b">–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —Ä–µ–π—Å!</h3>
                    <p>–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª–µ—Ç –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–π –†–µ–π—Å".</p>
                </div>

                <div id="gen-form" class="card">
                    <label>–ö–∞–º–ø–∞–Ω—ñ—è</label>
                    <select id="gen-airline" onchange="updateGenHubs()">
                        <option value="">-- –í—ã–±–µ—Ä–∏ --</option>
                    </select>
                    
                    <label>–û—Ç–∫—É–¥–∞ –ª–µ—Ç–∏–º?</label>
                    <select id="gen-hub" disabled>
                        <option>–ñ–¥—É –≤—ã–±–æ—Ä–∞...</option>
                    </select>

                    <label>–°–∫–æ–ª—å–∫–æ –ª–µ—Ç–µ—Ç—å?</label>
                    <select id="gen-time">
                        <option value="1-2">1 - 2 —á–∞—Å–∞ (–ö–æ—Ä–æ—Ç–∫–∏–π)</option>
                        <option value="3-4">3 - 4 —á–∞—Å–∞ (–°—Ä–µ–¥–Ω–∏–π)</option>
                        <option value="5-8">5 - 8 —á–∞—Å–æ–≤ (–î–ª–∏–Ω–Ω—ã–π)</option>
                        <option value="9+">9+ —á–∞—Å–æ–≤ (–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π)</option>
                    </select>

                    <button class="btn btn-yellow" onclick="generateRandomFlight()">–ü—Ä–∏–¥—É–º–∞—Ç—å –º–Ω–µ —Ä–µ–π—Å!</button>
                </div>
            </section>

            <section id="sec-my-flight" class="hidden">
                <h2 style="margin-bottom: 20px;">–¢–≤–æ–π –ö–æ–∫–ø–∏—Ç</h2>
                
                <div id="no-active-flight" class="card" style="text-align: center; padding: 40px;">
                    <h3>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª–µ—Ç–∞ üò¥</h3>
                    <p style="color:var(--text-gray)">–ó–∞–π–¥–∏ –≤ "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è" –∏–ª–∏ "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä", —á—Ç–æ–±—ã –≤–∑—è—Ç—å —Ä–µ–π—Å.</p>
                </div>

                <div id="active-flight-card" class="card hidden">
                    <div style="display:flex; justify-content:space-between; align-items:flex-end; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px; margin-bottom:15px;">
                        <div>
                            <h1 id="mf-callsign" style="color:var(--lh-yellow); font-size: 2.5rem;">DLH000</h1>
                            <h3 id="mf-route">EDDF -> KJFK</h3>
                        </div>
                        <div style="text-align: right;">
                            <span style="background:var(--lh-yellow); color:black; padding:5px 10px; border-radius:5px; font-weight:bold;">ACTIVE</span>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <p style="color:var(--text-gray)">–°–∞–º–æ–ª–µ—Ç</p>
                            <h4 id="mf-plane">---</h4>
                        </div>
                        <div>
                            <p style="color:var(--text-gray)">–í—Ä–µ–º—è –≤ –ø—É—Ç–∏</p>
                            <h4 id="mf-time">---</h4>
                        </div>
                        <div>
                            <p style="color:var(--text-gray)">–í—ã–ª–µ—Ç (UTC)</p>
                            <h4 id="mf-dep">---</h4>
                        </div>
                         <div>
                            <p style="color:var(--text-gray)">–ü—Ä–∏–ª–µ—Ç (–ú–µ—Å—Ç–Ω–æ–µ)</p>
                            <h4 id="mf-arr">---</h4>
                        </div>
                    </div>

                    <button class="btn" style="background: rgba(255, 80, 80, 0.2); color: #ffadad; margin-top: 20px;" onclick="finishFlight()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –†–µ–π—Å</button>
                </div>
            </section>

        </div>
    </div>

    <script>
        // --- –ë–ê–ó–ê –î–ê–ù–ù–´–• ---
        const pilots = [
            { name: "DLH001", pass: "admin" }, // –¢–≤–æ–∏ –ø–∏–ª–æ—Ç—ã
            { name: "SWR101", pass: "1234" }
        ];

        const airlines = [
            { code: "DLH", name: "Lufthansa", hubs: ["EDDF (Frankfurt)", "EDDM (Munich)"] },
            { code: "SWR", name: "Swiss", hubs: ["LSZH (Zurich)"] },
            { code: "AUA", name: "Austrian", hubs: ["LOWW (Vienna)"] },
            { code: "EWG", name: "Eurowings", hubs: ["EDDL (Dusseldorf)", "EDDH (Hamburg)"] }
        ];

        const fleet = [
            { name: "Airbus A320", range: 6, desc: "–ö–ª–∞—Å—Å–∏–∫–∞ –¥–ª—è –ø–æ–ª–µ—Ç–æ–≤ –ø–æ –ï–≤—Ä–æ–ø–µ." },
            { name: "Airbus A321", range: 7, desc: "–í–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π." },
            { name: "Boeing 747-8", range: 14, desc: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –î–∂–∞–º–±–æ –î–∂–µ—Ç." },
            { name: "Airbus A350", range: 16, desc: "–°—É–ø–µ—Ä —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–∞–π–Ω–µ—Ä." },
            { name: "CRJ-900", range: 4, desc: "–ú–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ —à—É—Å—Ç—Ä—ã–π." }
        ];

        const routes = [
            { dep: "EDDF", arr: "EGLL (London)", t: 1.5, hub: "EDDF" },
            { dep: "EDDF", arr: "KJFK (New York)", t: 8.5, hub: "EDDF" },
            { dep: "EDDF", arr: "OMDB (Dubai)", t: 6.0, hub: "EDDF" },
            { dep: "EDDM", arr: "LIRF (Rome)", t: 1.5, hub: "EDDM" },
            { dep: "EDDM", arr: "KLAX (Los Angeles)", t: 11.0, hub: "EDDM" },
            { dep: "LSZH", arr: "EDDF (Frankfurt)", t: 1.0, hub: "LSZH" },
            { dep: "LSZH", arr: "RJTT (Tokyo)", t: 12.0, hub: "LSZH" },
            { dep: "LOWW", arr: "EGLL (London)", t: 2.5, hub: "LOWW" },
            { dep: "EDDL", arr: "LEPA (Palma)", t: 2.5, hub: "EDDL" }
        ];

        // --- –ó–ê–ì–†–£–ó–ö–ê ---
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('intro-screen').classList.add('hidden');
                document.getElementById('login-screen').classList.remove('hidden');
            }, 2500);

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–∫–∏
            const genSel = document.getElementById('gen-airline');
            const destSel = document.getElementById('dest-airline');
            airlines.forEach(a => {
                genSel.add(new Option(a.name, a.code));
                destSel.add(new Option(a.name, a.code));
            });

            renderFleet();
            checkFlight();
        };

        // --- –õ–û–ì–ò–ù ---
        function login() {
            const call = document.getElementById('callsign').value.toUpperCase();
            const pass = document.getElementById('password').value;
            const user = pilots.find(p => p.name === call && p.pass === pass);

            if(user) {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                document.getElementById('pilot-name').innerText = user.name;
                document.getElementById('dashboard').classList.add('fade-up');
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        }

        // --- –ú–ï–ù–Æ ---
        function nav(id, el) {
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(el) el.classList.add('active');

            document.querySelectorAll('section').forEach(s => {
                s.classList.add('hidden');
                s.classList.remove('fade-up');
            });

            const target = document.getElementById('sec-' + id);
            target.classList.remove('hidden');
            void target.offsetWidth; 
            target.classList.add('fade-up');
        }

        // --- –§–õ–û–¢ ---
        function renderFleet() {
            const list = document.getElementById('fleet-list');
            fleet.forEach(ac => {
                list.innerHTML += `
                    <div class="card">
                        <h3 style="color:var(--lh-yellow)">${ac.name}</h3>
                        <p style="font-weight:bold; margin:5px 0;">–î–∞–ª—å–Ω–æ—Å—Ç—å: ${ac.range} —á.</p>
                        <p style="font-size:0.9rem; color:gray">${ac.desc}</p>
                    </div>
                `;
            });
        }

        // --- –ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø (–ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê) ---
        function updateDestHubs() {
            const code = document.getElementById('dest-airline').value;
            const hubSel = document.getElementById('dest-hub');
            hubSel.innerHTML = '<option value="">-- –•–∞–± --</option>';
            document.getElementById('routes-list').innerHTML = '';
            
            if(!code) { hubSel.disabled = true; return; }
            
            const airline = airlines.find(a => a.code === code);
            airline.hubs.forEach(h => {
                // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–æ–¥ —Ö–∞–±–∞ (–ø–µ—Ä–≤—ã–µ 4 –±—É–∫–≤—ã) –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞
                const cleanCode = h.split(' ')[0]; 
                const opt = new Option(h, cleanCode);
                hubSel.add(opt);
            });
            hubSel.disabled = false;
        }

        function showRoutes() {
            const hub = document.getElementById('dest-hub').value;
            const list = document.getElementById('routes-list');
            list.innerHTML = '';
            
            const matches = routes.filter(r => r.dep === hub);
            
            if(matches.length === 0) {
                list.innerHTML = '<p style="color:white; padding:10px;">–ú–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç :(</p>'; 
                return;
            }

            matches.forEach(r => {
                list.innerHTML += `
                    <div class="card">
                        <h3>${r.dep} ‚ûî ${r.arr}</h3>
                        <p style="margin:10px 0; color:var(--text-gray)">–í—Ä–µ–º—è: <b>${r.t} —á.</b></p>
                        <button class="btn btn-yellow" onclick="takeFlight('${r.dep}', '${r.arr}', ${r.t})">–í–ó–Ø–¢–¨ –†–ï–ô–°</button>
                    </div>
                `;
            });
        }

        // –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –í–ó–Ø–¢–¨ –†–ï–ô–°
        function takeFlight(dep, arr, time) {
            if(localStorage.getItem('myFlight')) {
                alert("–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–π—Å! –°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏ –µ–≥–æ.");
                return;
            }

            // –ü–æ–¥–±–æ—Ä —Å–∞–º–æ–ª–µ—Ç–∞
            const plane = fleet.find(f => f.range >= time && (time > 8 ? f.range > 10 : true));
            if(!plane) { alert("–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–∞–º–æ–ª–µ—Ç–∞ :("); return; }

            // –°–æ–∑–¥–∞–µ–º –ø–æ–∑—ã–≤–Ω–æ–π
            const airlineCode = document.getElementById('dest-airline').value || "DLH";
            const callsign = airlineCode + Math.floor(Math.random()*899+100);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º
            const flight = {
                callsign: callsign,
                route: dep + " -> " + arr,
                time: time,
                plane: plane.name,
                depTime: new Date().toISOString().slice(11,16) + ' Z',
                arrTime: new Date(Date.now() + time*3600000).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
            };

            localStorage.setItem('myFlight', JSON.stringify(flight));
            
            alert("–†–µ–π—Å –≤–∑—è—Ç! –£–¥–∞—á–∏, –∫–∞–ø–∏—Ç–∞–Ω!");
            checkFlight();
            nav('my-flight', document.querySelectorAll('.nav-item')[4]);
        }

        // --- –ì–ï–ù–ï–†–ê–¢–û–† ---
        function updateGenHubs() {
            const code = document.getElementById('gen-airline').value;
            const hubSel = document.getElementById('gen-hub');
            hubSel.innerHTML = '<option value="">-- –•–∞–± --</option>';
            
            if(code) {
                const airline = airlines.find(a => a.code === code);
                hubSel.disabled = false;
                airline.hubs.forEach(h => {
                    hubSel.add(new Option(h, h.split(' ')[0]));
                });
            } else {
                hubSel.disabled = true;
            }
        }

        function generateRandomFlight() {
            if(localStorage.getItem('myFlight')) return;

            const hub = document.getElementById('gen-hub').value;
            const rangeStr = document.getElementById('gen-time').value; // "1-2"
            
            if(!hub) { alert("–í—ã–±–µ—Ä–∏ –æ—Ç–∫—É–¥–∞ –ª–µ—Ç–µ—Ç—å!"); return; }

            // –ü–∞—Ä—Å–∏–º –≤—Ä–µ–º—è
            let min, max;
            if(rangeStr === "9+") { min=9; max=20; }
            else { const p = rangeStr.split('-'); min=parseFloat(p[0]); max=parseFloat(p[1]); }

            // –ò—â–µ–º —Ä–µ–π—Å
            const possible = routes.filter(r => r.dep === hub && r.t >= min && r.t <= max);
            
            if(possible.length === 0) { alert("–ù–µ –Ω–∞—à–µ–ª —Ç–∞–∫–∏—Ö —Ä–µ–π—Å–æ–≤, –ø–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è."); return; }
            
            const r = possible[Math.floor(Math.random() * possible.length)];
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—â—É—é —Ñ—É–Ω–∫—Ü–∏—é
            takeFlight(r.dep, r.arr, r.t);
        }

        // --- –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ï–ô–°–û–ú ---
        function checkFlight() {
            const data = localStorage.getItem('myFlight');
            const noFlight = document.getElementById('no-active-flight');
            const hasFlight = document.getElementById('active-flight-card');
            const bar = document.getElementById('active-bar');
            const genLocked = document.getElementById('gen-locked');
            const genForm = document.getElementById('gen-form');

            if(data) {
                const f = JSON.parse(data);
                noFlight.classList.add('hidden');
                hasFlight.classList.remove('hidden');
                bar.classList.remove('hidden');
                genLocked.classList.remove('hidden');
                genForm.classList.add('hidden');

                document.getElementById('mf-callsign').innerText = f.callsign;
                document.getElementById('mf-route').innerText = f.route;
                document.getElementById('mf-plane').innerText = f.plane;
                document.getElementById('mf-time').innerText = f.time + ' —á.';
                document.getElementById('mf-dep').innerText = f.depTime;
                document.getElementById('mf-arr').innerText = f.arrTime;
                
                document.getElementById('bar-call').innerText = f.callsign;
                document.getElementById('bar-route').innerText = f.route;
            } else {
                noFlight.classList.remove('hidden');
                hasFlight.classList.add('hidden');
                bar.classList.add('hidden');
                genLocked.classList.add('hidden');
                genForm.classList.remove('hidden');
            }
        }

        function finishFlight() {
            if(confirm("–ó–∞–∫–æ–Ω—á–∏—Ç—å —Ä–µ–π—Å –∏ —Å–¥–∞—Ç—å –æ—Ç—á–µ—Ç?")) {
                localStorage.removeItem('myFlight');
                checkFlight();
                alert("–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –ú–æ–∂–µ—à—å –±—Ä–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–π—Å.");
            }
        }

    </script>
</body>
</html>
