<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lufthansa Pilot Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. CONFIG & VARIABLES --- */
        :root {
            --lh-blue: #0b1f52; /* –ß—É—Ç—å –Ω–∞—Å—ã—â–µ–Ω–Ω–µ–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
            --lh-blue-light: #1a3a8a;
            --lh-yellow: #ffb600;
            --bg-color: #f0f4f8; /* –ú—è–≥–∫–∏–π –≥–æ–ª—É–±–æ–≤–∞—Ç–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω (–Ω–µ–±–æ) */
            --white: #ffffff;
            --text-main: #2c3e50;
            --radius-box: 24px; /* –°–∏–ª—å–Ω—ã–µ –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏—è */
            --radius-btn: 50px;
            --shadow-soft: 0 10px 40px rgba(5, 22, 77, 0.08);
            --shadow-hover: 0 15px 45px rgba(5, 22, 77, 0.15);
            --gradient-blue: linear-gradient(135deg, #0b1f52 0%, #162e6e 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Quicksand', sans-serif; }
        
        body { 
            background-color: var(--bg-color); 
            color: var(--text-main); 
            overflow-x: hidden; 
            min-height: 100vh;
        }

        /* --- 2. UTILITIES & ANIMATIONS --- */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.6s ease-in-out; }
        .slide-up { animation: slideUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); } /* –ü—Ä—É–∂–∏–Ω–∏—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è */

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        h2 {
            color: var(--lh-blue);
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8rem;
        }

        /* --- 3. UI COMPONENTS --- */
        .btn {
            background: var(--lh-blue);
            color: var(--white);
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            border-radius: var(--radius-btn);
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(11, 31, 82, 0.2);
            display: inline-block;
        }
        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 20px rgba(11, 31, 82, 0.3);
        }
        .btn-yellow { 
            background: var(--lh-yellow); 
            color: var(--lh-blue); 
        }
        .btn-yellow:hover { background: #ffcc00; }
        
        input, select {
            width: 100%;
            padding: 15px 20px;
            margin: 8px 0 20px 0;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            font-size: 1rem;
            background: #fff;
            transition: 0.3s;
            font-weight: 600;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--lh-blue);
            background: #fff;
        }

        .card {
            background: var(--white);
            padding: 30px;
            border-radius: var(--radius-box);
            box-shadow: var(--shadow-soft);
            margin-bottom: 25px;
            border: none;
            transition: 0.3s;
        }
        .card:hover { transform: translateY(-3px); }

        /* --- 4. SECTIONS --- */
        
        /* Welcome Screen */
        #welcome-screen {
            height: 100vh;
            background: var(--gradient-blue);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--white);
            text-align: center;
            padding: 20px;
        }
        .logo-circle {
            width: 120px; height: 120px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 20px;
            border: 3px solid var(--lh-yellow);
        }
        .crane { font-size: 4rem; color: var(--lh-yellow); }
        .welcome-title { font-size: 2.5rem; font-weight: 800; margin-bottom: 10px; }
        
        /* Login Screen */
        #login-screen {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--bg-color);
            background-image: radial-gradient(#dbe9f6 2px, transparent 2px); /* –¢–æ—á–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ */
            background-size: 30px 30px;
        }
        .login-box {
            background: var(--white);
            padding: 50px 40px;
            border-radius: var(--radius-box);
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: var(--shadow-soft);
        }

        /* DASHBOARD NAV (CENTERED & FLOATING) */
        .nav-container {
            position: sticky;
            top: 20px;
            z-index: 100;
            display: flex;
            justify-content: center;
            padding: 0 20px;
        }
        
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 10px 15px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            justify-content: center;
        }

        nav button {
            background: transparent;
            border: none;
            color: var(--text-main);
            font-weight: 700;
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 40px;
            transition: 0.3s;
            font-size: 0.9rem;
        }
        nav button:hover { background: #f0f4f8; color: var(--lh-blue); }
        nav button.active { background: var(--lh-blue); color: var(--white); box-shadow: 0 4px 10px rgba(11, 31, 82, 0.3); }

        .container { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        
        /* Header Profile */
        .profile-bar {
            text-align: center;
            margin-top: 30px;
            margin-bottom: 10px;
            color: var(--lh-blue);
        }
        .rank-badge {
            background: var(--lh-yellow);
            color: var(--lh-blue);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85rem;
            display: inline-block;
            margin-top: 5px;
        }

        /* Fleet Grid */
        .fleet-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 25px; 
        }
        .aircraft-card {
            padding: 15px; 
            text-align: center;
        }
        .aircraft-card img { 
            width: 100%; 
            height: 160px; 
            object-fit: cover; 
            border-radius: 16px; 
            margin-bottom: 15px;
        }
        .ac-stats {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 8px;
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        /* Active Flight Banner */
        #active-flight-banner {
            background: var(--gradient-blue);
            color: var(--white);
            padding: 20px 30px;
            margin-bottom: 30px;
            border-radius: var(--radius-box);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 25px rgba(11, 31, 82, 0.25);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        /* Ticket Style for Result */
        .ticket {
            border: 2px dashed #ccc;
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            position: relative;
        }
        .ticket::before, .ticket::after {
            content: ''; position: absolute; top: 50%; width: 20px; height: 20px;
            background: var(--bg-color); border-radius: 50%;
        }
        .ticket::before { left: -12px; }
        .ticket::after { right: -12px; }

        /* List styling */
        .rules-list li {
            background: #f8f9fa;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 12px;
            list-style: none;
            border-left: 5px solid var(--lh-yellow);
        }

    </style>
</head>
<body>

    <div id="welcome-screen" class="fade-in">
        <div class="logo-circle">
            <span class="crane">‚úà</span>
        </div>
        <div class="welcome-title">LUFTHANSA GROUP</div>
        <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px;">–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –¥–ª—è –ø–∏–ª–æ—Ç–æ–≤</p>
        <button class="btn btn-yellow" style="font-size: 1.2rem; padding: 15px 40px;" onclick="goToLogin()">–ù–ê–ß–ê–¢–¨ –ü–û–õ–ï–¢</button>
    </div>

    <div id="login-screen" class="hidden">
        <div class="login-box slide-up">
            <h2 style="margin-bottom: 10px;">–í—Ö–æ–¥ –≤ –∫–∞–±–∏–Ω—É</h2>
            <p style="margin-bottom:25px; color:#7f8c8d;">–í–≤–µ–¥–∏—Ç–µ –ø–æ–∑—ã–≤–Ω–æ–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ</p>
            
            <input type="text" id="callsign" placeholder="–í–∞—à –ø–æ–∑—ã–≤–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, DLH001)">
            <input type="password" id="password" placeholder="–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥">
            
            <button class="btn" style="width:100%" onclick="login()">–ó–ê–ü–£–°–¢–ò–¢–¨ –°–ò–°–¢–ï–ú–£</button>
            <p id="login-error" style="color:#e74c3c; margin-top:15px; font-weight:bold;"></p>
        </div>
    </div>

    <div id="dashboard" class="hidden">
        
        <div class="profile-bar slide-up">
            <div style="font-size: 1.5rem; font-weight: 800;">Lufthansa Group VA</div>
            <div class="rank-badge" id="user-display">Captain Not Logged In</div>
        </div>

        <div class="nav-container slide-up">
            <nav>
                <button class="active" onclick="showTab('about', this)">üåç –û –ù–∞—Å</button>
                <button onclick="showTab('rules', this)">üìú –ö–æ–¥–µ–∫—Å</button>
                <button onclick="showTab('fleet', this)">‚úà –§–ª–æ—Ç</button>
                <button onclick="showTab('routes', this)">üìç –•–∞–±—ã</button>
                <button onclick="showTab('generator', this)">üé≤ –†–µ–π—Å</button>
                <button onclick="showTab('pilots', this)">üë®‚Äç‚úàÔ∏è –ü–∏–ª–æ—Ç—ã</button>
            </nav>
        </div>

        <div class="container">
            
            <div id="active-flight-banner" class="hidden slide-up">
                <div style="display:flex; align-items:center; gap:15px;">
                    <div style="font-size:2rem;">üõ´</div>
                    <div>
                        <div style="font-size:0.8rem; opacity:0.8; text-transform:uppercase;">–¢–µ–∫—É—â–∞—è –º–∏—Å—Å–∏—è</div>
                        <div style="font-size:1.4rem; font-weight:bold;"><span id="af-info">EDDF - KJFK</span></div>
                        <div style="font-size:0.9rem; color:var(--lh-yellow);" id="af-ac">A350-900</div>
                    </div>
                </div>
                <button class="btn btn-yellow" onclick="completeFlight()">–ó–ê–í–ï–†–®–ò–¢–¨ –ú–ò–°–°–ò–Æ</button>
            </div>

            <div id="tab-about" class="tab-content fade-in">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –±–æ—Ä—Ç!</h2>
                <div class="card">
                    <h3>–ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Ç–µ–±—è, –ö–∞–ø–∏—Ç–∞–Ω! üëã</h3>
                    <p style="margin-top:15px; line-height:1.6;">
                        –≠—Ç–æ —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≤ Lufthansa Group Virtual. –ó–¥–µ—Å—å –≤—Å—ë –∫–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–π –∞–≤–∏–∞—Ü–∏–∏, –Ω–æ –Ω–µ–º–Ω–æ–≥–æ –≤–µ—Å–µ–ª–µ–µ. 
                        –ú—ã —Ü–µ–Ω–∏–º –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç—å, —É–≤–∞–∂–µ–Ω–∏–µ –∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞–º –∏ –ª—é–±–æ–≤—å –∫ –Ω–µ–±—É.
                    </p>
                    <div style="margin-top:20px; display:flex; gap:10px; flex-wrap:wrap;">
                        <span class="rank-badge" style="background:#e1e8ed; color:#333">#Aviation</span>
                        <span class="rank-badge" style="background:#e1e8ed; color:#333">#Simulation</span>
                        <span class="rank-badge" style="background:#e1e8ed; color:#333">#Friends</span>
                    </div>
                </div>
            </div>

            <div id="tab-rules" class="tab-content hidden fade-in">
                <h2>–ö–æ–¥–µ–∫—Å –ü–∏–ª–æ—Ç–∞</h2>
                <div class="card">
                    <ul class="rules-list">
                        <li><strong>ü§ù –£–≤–∞–∂–µ–Ω–∏–µ:</strong> –ú—ã –∫–æ–º–∞–Ω–¥–∞. –û—Ç–Ω–æ—Å–∏—Å—å –∫ –¥—Ä—É–≥–∏–º –ø–∏–ª–æ—Ç–∞–º –¥—Ä—É–∂–µ–ª—é–±–Ω–æ.</li>
                        <li><strong>üéô –ü–æ–∑—ã–≤–Ω–æ–π:</strong> –í –Ω–µ–±–µ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–¥.</li>
                        <li><strong>üè† –î–æ–º–∞—à–Ω–∏–π –•–∞–±:</strong> –í—ã–ª–µ—Ç–∞–π —Ç–æ–ª—å–∫–æ –∏–∑ –±–∞–∑—ã —Å–≤–æ–µ–π –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏–∏.</li>
                        <li><strong>‚úà –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∞–º–æ–ª–µ—Ç:</strong> –ù–µ –±–µ—Ä–∏ –æ–≥—Ä–æ–º–Ω—ã–π –ª–∞–π–Ω–µ—Ä –¥–ª—è –ø–æ–ª–µ—Ç–∞ –≤ —Å–æ—Å–µ–¥–Ω–∏–π –≥–æ—Ä–æ–¥!</li>
                        <li><strong>üìÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</strong> –°—Ç–∞—Ä–∞–π—Å—è –ª–µ—Ç–∞—Ç—å —Ö–æ—Ç—è –±—ã —Ä–∞–∑ –≤ –º–µ—Å—è—Ü, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é.</li>
                    </ul>
                </div>
            </div>

            <div id="tab-fleet" class="tab-content hidden fade-in">
                <h2>–ù–∞—à –ê–≤–∏–∞–ø–∞—Ä–∫</h2>
                <div id="fleet-container" class="fleet-grid">
                    </div>
            </div>

            <div id="tab-routes" class="tab-content hidden fade-in">
                <h2>–ì–¥–µ –º—ã –±–∞–∑–∏—Ä—É–µ–º—Å—è?</h2>
                <div class="card">
                    <p style="margin-bottom:15px;">–£ –∫–∞–∂–¥–æ–π –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏–∏ —Å–≤–æ–π "–¥–æ–º" (–•–∞–±). –ó–∞–ø–æ–º–Ω–∏ –∏—Ö:</p>
                    <ul id="hub-list-display" class="rules-list">
                        </ul>
                </div>
            </div>

            <div id="tab-generator" class="tab-content hidden fade-in">
                <h2>–¶–µ–Ω—Ç—Ä –ü–æ–ª–µ—Ç–æ–≤</h2>
                
                <div id="generator-locked" class="card hidden" style="text-align:center; background-color: #fff8e1; border: 2px solid var(--lh-yellow);">
                    <div style="font-size:3rem;">üîí</div>
                    <h3>–ó–∞–¥–∞—á–∞ —É–∂–µ –≤–∑—è—Ç–∞!</h3>
                    <p>–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∑—è—Ç—å –Ω–æ–≤—É—é –º–∏—Å—Å–∏—é, –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–∑–µ–º–ª–∏—Ç–µ—Å—å –∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â—É—é.</p>
                </div>

                <div id="generator-form" class="card">
                    <label>1. –í—ã–±–µ—Ä–∏ —Å–≤–æ—é –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏—é:</label>
                    <select id="gen-airline" onchange="updateHubs()">
                        <option value="">-- –ù–∞–∂–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ --</option>
                    </select>

                    <label>2. –ê—ç—Ä–æ–ø–æ—Ä—Ç –≤—ã–ª–µ—Ç–∞ (–•–∞–±):</label>
                    <select id="gen-hub" disabled>
                        <option value="">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏ –∫–æ–º–ø–∞–Ω–∏—é ‚òùÔ∏è</option>
                    </select>

                    <label>3. –°–∫–æ–ª—å–∫–æ —Ö–æ—á–µ—à—å –ª–µ—Ç–µ—Ç—å?</label>
                    <select id="gen-time">
                        <option value="short">–ë—ã—Å—Ç—Ä–æ (1-3 —á–∞—Å–∞)</option>
                        <option value="medium">–ù–æ—Ä–º–∞–ª—å–Ω–æ (3-7 —á–∞—Å–æ–≤)</option>
                        <option value="long">–î–æ–ª–≥–æ (8-14 —á–∞—Å–æ–≤)</option>
                    </select>

                    <button class="btn" style="width:100%; margin-top:10px;" onclick="generateFlight()">–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ó–ê–î–ê–ù–ò–ï</button>
                </div>

                <div id="gen-result" class="card hidden slide-up" style="background: #f4f9ff;">
                    <div class="ticket">
                        <h3 style="color: var(--lh-blue); margin-bottom:15px;">üé´ –¢–≤–æ–µ –ø–æ–ª–µ—Ç–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h3>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                            <div>
                                <div style="font-size:0.8rem; color:#888;">–ú–ê–†–®–†–£–¢</div>
                                <strong style="font-size:1.2rem;"><span id="res-dep">FRA</span> ‚ûù <span id="res-arr">JFK</span></strong>
                                <br><br>
                                <div style="font-size:0.8rem; color:#888;">–í–†–ï–ú–Ø</div>
                                <span>‚è± <span id="res-time">8.5—á</span></span>
                            </div>
                            <div style="text-align:right;">
                                <div style="font-size:0.8rem; color:#888;">–°–ê–ú–û–õ–ï–¢</div>
                                <strong id="res-ac">A350</strong>
                                <br><br>
                                <div style="font-size:0.8rem; color:#888;">–ë–û–†–¢–û–í–û–ô</div>
                                <span id="res-reg" style="background:var(--lh-yellow); padding:2px 6px; border-radius:4px; color:#000;">D-AIXP</span>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-yellow" style="margin-top:20px; width:100%;" onclick="acceptFlight()">–ü–†–ò–ù–Ø–¢–¨ –ò –í–ó–õ–ï–¢–ï–¢–¨</button>
                </div>
            </div>

            <div id="tab-pilots" class="tab-content hidden fade-in">
                <h2>–ù–∞—à–∏ –ö–∞–ø–∏—Ç–∞–Ω—ã</h2>
                <div class="card">
                    <table style="width:100%; border-collapse: separate; border-spacing: 0 10px;">
                        <tbody id="pilots-table">
                            </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï (–†–ï–î–ê–ö–¢–ò–†–£–ô –ó–î–ï–°–¨) ---
        
        const USERS = [
            { callsign: "DLH001", pass: "1234", name: "Captain Hans" },
            { callsign: "SWR202", pass: "swiss", name: "Pilot Mueller" },
            { callsign: "AUA303", pass: "vienna", name: "Pilot Weber" }
        ];

        const AIRLINES = {
            "Lufthansa": ["EDDF (Frankfurt)", "EDDM (Munich)"],
            "SWISS": ["LSZH (Zurich)"], 
            "Austrian": ["LOWW (Vienna)"],
            "Eurowings": ["EDDL (Dusseldorf)", "EDDH (Hamburg)"]
        };

        const FLEET = [
            { type: "Airbus A319", maxHours: 5, img: "https://upload.wikimedia.org/wikipedia/commons/4/43/Lufthansa_Airbus_A319-100_D-AILU.jpg" },
            { type: "Airbus A320neo", maxHours: 6, img: "https://upload.wikimedia.org/wikipedia/commons/e/e3/Lufthansa_Airbus_A320neo_D-AINA_FRA_2016.jpg" },
            { type: "Airbus A330-300", maxHours: 11, img: "https://upload.wikimedia.org/wikipedia/commons/c/c2/Lufthansa_A330-300_D-AIKQ_01.jpg" },
            { type: "Airbus A350-900", maxHours: 16, img: "https://upload.wikimedia.org/wikipedia/commons/6/69/Lufthansa_Airbus_A350-941_D-AIXP_%2849586947268%29.jpg" },
            { type: "Boeing 747-8", maxHours: 14, img: "https://upload.wikimedia.org/wikipedia/commons/b/b8/Lufthansa_Boeing_747-830_D-ABYT.jpg" },
            { type: "Bombardier CRJ900", maxHours: 3.5, img: "https://upload.wikimedia.org/wikipedia/commons/6/63/Lufthansa_CityLine_Bombardier_CRJ-900_D-ACKI.jpg" }
        ];

        const DESTINATIONS = [
            { code: "KJFK", city: "New York", hours: 8.5 },
            { code: "EGLL", city: "London", hours: 1.5 },
            { code: "OMDB", city: "Dubai", hours: 6.5 },
            { code: "RJTT", city: "Tokyo", hours: 12 },
            { code: "UUEE", city: "Moscow", hours: 3 },
            { code: "LEMD", city: "Madrid", hours: 2.5 },
            { code: "FACT", city: "Cape Town", hours: 11.5 },
            { code: "GCLP", city: "Gran Canaria", hours: 4.5 }
        ];

        // --- –õ–û–ì–ò–ö–ê –°–ò–°–¢–ï–ú–´ ---

        let currentUser = null;
        let generatedFlightTemp = null;

        window.onload = function() {
            populateFleet();
            populateAirlinesSelect();
            populateHubsInfo();
            populatePilots();
            
            // –ï—Å–ª–∏ –±—ã–ª–∞ –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è (—É–ø—Ä–æ—â–µ–Ω–æ)
            // checkStorage(); 
        };

        function goToLogin() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('login-screen').classList.remove('hidden');
        }

        function login() {
            const callInput = document.getElementById('callsign').value.toUpperCase();
            const passInput = document.getElementById('password').value;
            const errorMsg = document.getElementById('login-error');

            const user = USERS.find(u => u.callsign === callInput && u.pass === passInput);

            if (user) {
                currentUser = user;
                document.getElementById('user-display').innerHTML = `üë®‚Äç‚úàÔ∏è ${user.callsign} | ${user.name}`;
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                checkActiveFlight();
            } else {
                errorMsg.innerText = "–£–ø—Å! –ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ–∑—ã–≤–Ω–æ–π –∏–ª–∏ –ø–∞—Ä–æ–ª—å.";
            }
        }

        function showTab(tabName, btnElement) {
            const tabs = document.getElementsByClassName('tab-content');
            for (let t of tabs) t.classList.add('hidden');
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            const navBtns = document.querySelectorAll('nav button');
            navBtns.forEach(b => b.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
        }

        function populateFleet() {
            const container = document.getElementById('fleet-container');
            FLEET.forEach(ac => {
                container.innerHTML += `
                    <div class="card aircraft-card">
                        <img src="${ac.img}" alt="${ac.type}">
                        <h4 style="color:var(--lh-blue)">${ac.type}</h4>
                        <div class="ac-stats">–ú–∞–∫—Å. –ø–æ–ª–µ—Ç: <strong>${ac.maxHours} —á.</strong></div>
                    </div>
                `;
            });
        }

        function populatePilots() {
            const table = document.getElementById('pilots-table');
            USERS.forEach(u => {
                table.innerHTML += `
                    <tr style="background:#fff; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                        <td style="padding:15px; border-radius:10px 0 0 10px; font-weight:bold;">${u.callsign}</td>
                        <td style="padding:15px; border-radius:0 10px 10px 0; color:#27ae60; text-align:right;">‚óè –í —Å–µ—Ç–∏</td>
                    </tr>
                `;
            });
        }

        function populateAirlinesSelect() {
            const sel = document.getElementById('gen-airline');
            for (let airline in AIRLINES) {
                let opt = document.createElement('option');
                opt.value = airline;
                opt.innerHTML = airline;
                sel.appendChild(opt);
            }
        }

        function populateHubsInfo() {
            const list = document.getElementById('hub-list-display');
            for (let airline in AIRLINES) {
                list.innerHTML += `<li><strong style="color:var(--lh-blue)">${airline}:</strong> ${AIRLINES[airline].join(", ")}</li>`;
            }
        }

        function updateHubs() {
            const airline = document.getElementById('gen-airline').value;
            const hubSel = document.getElementById('gen-hub');
            hubSel.innerHTML = "";

            if (!airline) {
                hubSel.disabled = true;
                let opt = document.createElement('option');
                opt.text = "–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏ –∫–æ–º–ø–∞–Ω–∏—é ‚òùÔ∏è";
                hubSel.appendChild(opt);
                return;
            }

            const hubs = AIRLINES[airline];
            
            if (hubs.length === 1) {
                let opt = document.createElement('option');
                opt.value = hubs[0];
                opt.innerHTML = hubs[0] + " (–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö–∞–±)";
                hubSel.appendChild(opt);
                hubSel.disabled = true; 
            } else {
                hubSel.disabled = false;
                hubs.forEach(h => {
                    let opt = document.createElement('option');
                    opt.value = h;
                    opt.innerHTML = h;
                    hubSel.appendChild(opt);
                });
            }
        }

        function generateFlight() {
            const airline = document.getElementById('gen-airline').value;
            const hub = document.getElementById('gen-hub').value;
            const timePref = document.getElementById('gen-time').value;

            if (!airline || !hub) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è, –ö–∞–ø–∏—Ç–∞–Ω!");
                return;
            }

            let minH, maxH;
            if (timePref === 'short') { minH = 1; maxH = 3; }
            else if (timePref === 'medium') { minH = 3; maxH = 7; }
            else { minH = 8; maxH = 14; }

            const availableAC = FLEET.filter(ac => {
                if (timePref === 'long') return ac.maxHours >= 8;
                if (timePref === 'short') return ac.maxHours < 8; 
                return ac.maxHours >= 3;
            });

            if (availableAC.length === 0) {
                alert("–£ –Ω–∞—Å –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–∞–º–æ–ª–µ—Ç–∞ –¥–ª—è —Ç–∞–∫–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.");
                return;
            }

            const randomAC = availableAC[Math.floor(Math.random() * availableAC.length)];

            let suitableDest = DESTINATIONS.filter(d => d.hours >= minH && d.hours <= maxH);
            let finalDest = suitableDest.length > 0 
                ? suitableDest[Math.floor(Math.random() * suitableDest.length)] 
                : DESTINATIONS[Math.floor(Math.random() * DESTINATIONS.length)];
            
            const flightTime = (Math.random() * (maxH - minH) + minH).toFixed(1);

            generatedFlightTemp = {
                dep: hub.split(' ')[0], // –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–¥ ICAO
                arr: finalDest.code,
                ac: randomAC.type,
                time: flightTime + " —á.",
                reg: "D-A" + Math.floor(1000 + Math.random() * 9000),
                date: new Date().toLocaleDateString()
            };

            document.getElementById('res-dep').innerText = generatedFlightTemp.dep;
            document.getElementById('res-arr').innerText = generatedFlightTemp.arr;
            document.getElementById('res-time').innerText = generatedFlightTemp.time;
            document.getElementById('res-ac').innerText = generatedFlightTemp.ac;
            document.getElementById('res-reg').innerText = generatedFlightTemp.reg;

            document.getElementById('gen-result').classList.remove('hidden');
        }

        function acceptFlight() {
            if (!generatedFlightTemp) return;
            localStorage.setItem('activeFlight', JSON.stringify(generatedFlightTemp));
            document.getElementById('gen-result').classList.add('hidden');
            checkActiveFlight();
            alert("–ó–∞–¥–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ! –°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –ø—É—Ç–∏!");
        }

        function checkActiveFlight() {
            const activeData = localStorage.getItem('activeFlight');
            
            if (activeData) {
                const flight = JSON.parse(activeData);
                
                document.getElementById('active-flight-banner').classList.remove('hidden');
                document.getElementById('af-info').innerText = `${flight.dep} ‚ûù ${flight.arr}`;
                document.getElementById('af-ac').innerText = flight.ac;

                document.getElementById('generator-form').classList.add('hidden');
                document.getElementById('generator-locked').classList.remove('hidden');
            } else {
                document.getElementById('active-flight-banner').classList.add('hidden');
                document.getElementById('generator-form').classList.remove('hidden');
                document.getElementById('generator-locked').classList.add('hidden');
            }
        }

        function completeFlight() {
            if(confirm("–í—ã –ø—Ä–∏–∑–µ–º–ª–∏–ª–∏—Å—å –∏ –∑–∞–≥–ª—É—à–∏–ª–∏ –¥–≤–∏–≥–∞—Ç–µ–ª–∏? –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∏—Å—Å–∏—é?")) {
                localStorage.removeItem('activeFlight');
                checkActiveFlight();
                alert("–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –†–µ–π—Å —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.");
            }
        }

    </script>
</body>
</html>
